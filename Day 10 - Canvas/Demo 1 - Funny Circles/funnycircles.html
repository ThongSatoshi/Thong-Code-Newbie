<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hình tròn vui nhộn</title>
    <style>
        h1 {
            font-size: 40px;
            font-style: italic;
            text-align: center;
        }

        .button {
            font-size: 18px;
            font-weight: bold;
            height: 30px;
            width: 200px;
            transform: translate(50px, 1px);
        }

        #canvas {
            transform: translate(60px, 0);
        }
    </style>
</head>

<body>
    <h1>Hình tròn vui nhộn - Funny Circle</h1>
    <button class="button" onclick="drawCircle()">Vẽ đường tròn</button>
    <button class="button" onclick="randomCircle()">Ngẫu nhiên hóa</button>
    <button class="button" onclick="manyCircles()">Vẽ nhiều đường tròn</button>
    <button class="button" onclick="funnyCircle()">Funny Circles!</button>
    <button class="button" onclick="addAnimation()">Tạo hoạt hình</button>
    <button class="button" onclick="resetCanvas()">Xóa tất cả</button>
    <br>
    <br>
    <canvas id="canvas" width="1200px" height="1000px" style="border:1px solid rgb(0, 0, 0)"></canvas>
    <script type="text/javascript">
        let context = document.getElementById("canvas").getContext("2d");

        // Khởi tạo các thuộc tính của đường tròn (tọa độ x, y và bán kính r)
        function circleProperty(x, y, r) {
            this.x = x;
            this.y = y;
            this.r = r;
        };

        // Xóa Canvas
        function resetCanvas() {
            context.clearRect(0, 0, canvas.width, canvas.height);
        };

        // Vẽ đường tròn bình thường
        function drawCircle() {
            resetCanvas();
            let x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
            while (isNaN(x) || x < 10 || x > 990 || x == null) {
                alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
            };
            let y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
            while (isNaN(y) || y < 10 || y > 990 || y == null) {
                alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
            };
            let r = parseInt(prompt("Hãy nhập bán kính của đường tròn"));
            while (isNaN(r) || r < 10 || r > 250 || r == null) {
                alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 250");
                r = parseInt(prompt("Hãy nhập bán kính của đường tròn"));
            };
            var circle = new circleProperty(x, y, r);

            context.beginPath();
            context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
            context.fillStyle = "grey";
            context.fill();
        };

        // Ngẫu nhiên hóa một số tham số của đường tròn (bán kính, màu nền và vị trí)
        function randomCircle() {
            resetCanvas();
            let whatRandom = prompt("Bạn muốn ngẫu nhiên hóa thuộc tính nào sau đây?" + "\n"
                + "Bán kính: hãy nhập 'radius'" + "\n"
                + "Màu nền: hãy nhập 'color'" + "\n"
                + "Vị trí: hãy nhập 'position'");
            while (whatRandom !== "radius" && whatRandom !== "color" && whatRandom !== "position" || whatRandom == null) {
                alert("Vui lòng nhập theo hướng dẫn");
                whatRandom = prompt("Bạn muốn ngẫu nhiên hóa thuộc tính nào sau đây?" + "\n"
                    + "Bán kính: hãy nhập 'radius'" + "\n"
                    + "Màu nền: hãy nhập 'color'" + "\n"
                    + "Vị trí: hãy nhập 'position'");
            };

            let x, y, r;
            switch (whatRandom) {
                case "radius":
                    x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
                    while (isNaN(x) || x < 10 || x > 990 || x == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                        x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
                    };
                    y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
                    while (isNaN(y) || y < 10 || y > 990 || y == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                        y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
                    };
                    r = Math.floor(Math.random() * (251 - 10 + 1)) + 10; // Từ 10 đến 250
                    var circle = new circleProperty(x, y, r);

                    context.beginPath();
                    context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
                    context.fillStyle = "grey";
                    context.fill();
                    break;

                case "position":
                    r = parseInt(prompt("Hãy nhập bán kính của đường tròn"));
                    while (isNaN(r) || r < 10 || r > 250 || r == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 250");
                        r = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
                    };
                    x = Math.floor(Math.random() * (991 - 10 + 1)) + 10; // Từ 10 đến 990
                    y = Math.floor(Math.random() * (991 - 10 + 1)) + 10; // Từ 10 đến 990
                    var circle = new circleProperty(x, y, r);

                    context.beginPath();
                    context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
                    context.fillStyle = "grey";
                    context.fill();
                    break;

                case "color":
                    x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
                    while (isNaN(x) || x < 10 || x > 990 || x == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                        x = parseInt(prompt("Hãy nhập tọa độ x của đường tròn"));
                    };
                    y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
                    while (isNaN(y) || y < 10 || y > 990 || y == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 450");
                        y = parseInt(prompt("Hãy nhập tọa độ y của đường tròn"));
                    };
                    r = parseInt(prompt("Hãy nhập bán kính của đường tròn"));
                    while (isNaN(r) || r < 10 || r > 250 || r == null) {
                        alert("Lưu ý! Hệ thống chỉ ghi nhận các giá trị số nguyên từ 10 đến 250");
                        r = parseInt(prompt("Hãy nhập bán kính của đường tròn"));
                    };
                    var circle = new circleProperty(x, y, r);
                    var color = getRandomColor(0.5);

                    context.beginPath();
                    context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
                    context.fillStyle = color;
                    context.fill();
                    break;
            };
        };

        // Cặp đôi hàm tạo mã màu RGB ngẫu nhiên
        function getRandomHex() {
            return Math.floor(Math.random() * 256); //Từ 0 đến 255
        };
        function getRandomColor(opacity) {
            let redValue = getRandomHex();
            let greenValue = getRandomHex();
            let blueValue = getRandomHex();
            return "rgba(" + redValue + "," + greenValue + "," + blueValue + "," + opacity + ")";
        };

        // Vẽ nhiều đường tròn cùng một lúc (có thể trùng hoặc không?)
        function manyCircles() {
            resetCanvas();
            let howMany = parseInt(prompt("Bạn muốn vẽ bao nhiêu đường tròn?"));
            while (isNaN(howMany) || howMany < 1 || howMany == null) {
                alert("Lưu ý! Số lượng đường tròn phải là 1 giá trị số nguyên lớn hơn 0");
                howMany = parseInt(prompt("Bạn muốn vẽ bao nhiêu đường tròn?"));
            };

            for (let i = 0; i < howMany; i++) {
                x = Math.floor(Math.random() * (991 - 10 + 1)) + 10;
                y = Math.floor(Math.random() * (991 - 10 + 1)) + 10;
                r = Math.floor(Math.random() * (251 - 10 + 1)) + 10;
                var circle = new circleProperty(x, y, r);
                var color = getRandomColor(0.5);

                context.beginPath();
                context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
                context.fillStyle = color;
                context.fill();
            };
        };

        // Kích chọn tất cả các lựa chọn (ngẫu nhiên hóa các tham số + nhiều đường tròn + có hoạt họa)
        function funnyCircle() {
            resetCanvas();
            var howMany = Math.floor(Math.random() * 20) + 1; // Từ 1 đến 20
            for (let i = 0; i < howMany; i++) {
                x = Math.floor(Math.random() * (991 - 10 + 1)) + 10;
                y = Math.floor(Math.random() * (991 - 10 + 1)) + 10;
                r = Math.floor(Math.random() * (251 - 10 + 1)) + 10;
                var circle = new circleProperty(x, y, r);
                var color = getRandomColor(0.5);

                context.beginPath();
                context.arc(circle.x, circle.y, circle.r, 0, 2 * Math.PI);
                context.fillStyle = color;
                context.fill();
            };
        };

        // Tạo hiệu ứng hoạt hình cho đường tròn
        function addAnimation() {
            resetCanvas();
            let originX, originY, radius, speed, color, opacity, howMany, frame = 250;
            let propertyArr = [];
            howMany = parseInt(prompt("Bạn muốn khởi tạo hoạt hình cho bao nhiêu đường tròn?" + "\n" + "(Khuyến khích 20 - 30)"));
            while (isNaN(howMany) || howMany < 1 || howMany == null) {
                alert("Lưu ý! Số lượng đường tròn phải là 1 giá trị số nguyên lớn hơn 0");
                howMany = parseInt(prompt("Bạn muốn khởi tạo hoạt hình cho bao nhiêu đường tròn?" + "\n" + "(Khuyến khích 20 - 30)"));
            };

            for (let i = 0; i < howMany; i++) {
                originX = Math.floor(Math.random() * (canvas.width - 1) + 1);
                originY = Math.floor(Math.random() * (canvas.height - 1) + 1);
                radius = Math.floor(Math.random() * (101 - 10 + 1) + 10);
                speed = Math.floor(Math.random() * (25 - 5) + 5);
                color = getRandomColor(opacity);
                opacity = Math.random() * (0.85 - 0.25) + 0.25;
                density = 0.5;
                propertyArr[i] = [originX, originY, radius, speed, color, opacity, density];
            };

            function createRandomCircles() {
                resetCanvas();
                for (let i = 0; i < howMany; i++) {
                    context.beginPath();
                    context.fillStyle = propertyArr[i][4];
                    context.arc(propertyArr[i][0], propertyArr[i][1], propertyArr[i][2], 0, Math.PI * 2);
                    context.fill();
                };
            };

            function loopAnimation(frame, looping) {
                for (let i = 0; i < howMany; i++) {
                    propertyArr[i][0] += propertyArr[i][3] * propertyArr[i][6];
                    if (propertyArr[i][0] >= canvas.width + propertyArr[i][2]) {
                        propertyArr[i][0] -= canvas.width - 10;
                        propertyArr[i][1] = Math.floor(Math.random() * canvas.height);
                    };
                    createRandomCircles();
                };

                setInterval(loopAnimation, frame);
            };

            loopAnimation(frame);
        };
    </script>
</body>

</html>